# Orca Render Server - GUI Dashboard

ุฎุงุฏู Node.js ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุนุฑุถ (Rendering) ููุฑููุงุช ูุน ูุงุฌูุฉ ุฑุณูููุฉ ุชูุงุนููุฉ ูู ุงูููุช ุงููุนูู.

## ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ โจ

### ูุงุฌูุฉ GUI ุงูุชูุงุนููุฉ
- **ููุญุฉ ุชุญูู ุญูุฉ**: ุนุฑุถ ุญุงูุฉ ุงูุฎุงุฏู ูุงูุฅุญุตุงุฆูุงุช ูู ุงูููุช ุงููุนูู
- **ูุงุฆูุฉ ุงูุงูุชุธุงุฑ**: ูุชุงุจุนุฉ ุฌููุน ุงููุธุงุฆู ุงููุนููุฉ ูุงูุฌุงุฑูุฉ
- **ุชุชุจุน ุงูุชูุฏู**: ุนุฑุถ ุชูุฏู ูู ุฑูู (pending, processing, uploading, completed, failed)
- **ุณุฌู ุงูุฃุญุฏุงุซ**: ุนุฑุถ ุฌููุน ุงูุนูููุงุช ูุงูุฃุฎุทุงุก ุจุฃููุงู ุชูููุฒูุฉ
- **ุฅุญุตุงุฆูุงุช ููุฑูุฉ**: ุนุฏุฏ ุงููุธุงุฆูุ ุงูุฑููุงุช ุงูููุชููุฉุ ุญุงูุฉ ุงููุนุงูุฌุฉ

### ุชุญุฏูุซุงุช WebSocket
- ุงุชุตุงู ูุจุงุดุฑ ุจูู ุงูุฎุงุฏู ูุงููุงุฌูุฉ
- ุชุญุฏูุซุงุช ููุฑูุฉ ุจุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- ุฅุดุนุงุฑุงุช ูุญุธูุฉ ุนูุฏ:
  - ุฅุถุงูุฉ ูุธููุฉ ุฌุฏูุฏุฉ
  - ุจุฏุก ูุนุงูุฌุฉ ูุธููุฉ
  - ุฑูุน ุฑูู ุฅูู GCS
  - ุงูุชูุงู ุฃู ูุดู ูุธููุฉ

## ุงูุชุซุจูุช ๐ฆ

### ุงููุชุทูุจุงุช
- Node.js v14 ุฃู ุฃุญุฏุซ
- npm ุฃู yarn

### ุงูุฎุทูุงุช

1. **ุชุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ**:
```bash
npm install
```

ุฅุฐุง ูู ููู ูุฏูู ููู `package.json` ูุญุฏุซุ ูู ุจุชุซุจูุช ุงูุญุฒู ูุฏููุงู:
```bash
npm install express socket.io chokidar @google-cloud/storage node-fetch
```

2. **ุงูุชุญูู ูู ููู ุจูุงูุงุช ุงูุงุนุชูุงุฏ**:
ุชุฃูุฏ ูู ูุฌูุฏ ููู GCS ูู ุงููุณุงุฑ:
```
config/valiant-monitor-459014-p0-282c36407221.json
```

## ุงูุชุดุบูู ๐

### ุชุดุบูู ุงูุฎุงุฏู
```bash
node server.js
```

ุฃู ุจุงุณุชุฎุฏุงู nodemon ููุชุทููุฑ:
```bash
npm install -g nodemon
nodemon server.js
```

### ุงููุตูู ูููุงุฌูุฉ ุงูุฑุณูููุฉ
ุจุนุฏ ุชุดุบูู ุงูุฎุงุฏูุ ุงูุชุญ ุงููุชุตูุญ ุนูู:
```
http://localhost:6068
```

## ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ๐ฅ๏ธ

### ููุญุฉ ุงูุฅุญุตุงุฆูุงุช
ุชุนุฑุถ 4 ุจุทุงูุงุช ูู ุงูุฃุนูู:
- **ูุงุฆูุฉ ุงูุงูุชุธุงุฑ**: ุนุฏุฏ ุงููุธุงุฆู ุงููุนููุฉ
- **ุงููุธุงุฆู ุงููุนุงูุฌุฉ**: ุฅุฌูุงูู ุงููุธุงุฆู ููุฐ ุจุฏุก ุงูุชุดุบูู
- **ุงูุฑููุงุช ุงูููุชููุฉ**: ุนุฏุฏ ูููุงุช MP4 ุงููุฑููุนุฉ
- **ุญุงูุฉ ุงููุนุงูุฌุฉ**: ุฌุงุฑู ุงููุนุงูุฌุฉ / ูุชููู

### ูุงุฆูุฉ ุงููุธุงุฆู
- **ูุธููุฉ ุฌุงุฑู ูุนุงูุฌุชูุง**: ุชุธูุฑ ุจุฎูููุฉ ุฎุถุฑุงุก ูุน ุดุฑูุท ุชูุฏู
- **ุชุชุจุน ุงูุฑููุงุช**: ูู ุฑูู ูุนุฑุถ ุญุงูุชู ุงูุญุงููุฉ:
  - ๐ต **ูู ุงูุงูุชุธุงุฑ** (pending)
  - ๐ก **ุฌุงุฑู ุงูุนุฑุถ** (processing)
  - ๐ **ุฌุงุฑู ุงูุฑูุน** (uploading)
  - ๐ข **ููุชูู** (completed)
  - ๐ด **ูุดู** (failed)

### ุณุฌู ุงูุฃุญุฏุงุซ
- **ุฃุฒุฑู**: ูุนูููุงุช ุนุงูุฉ (info)
- **ุฃุฎุถุฑ**: ุนูููุงุช ูุงุฌุญุฉ (success)
- **ุฃุตูุฑ**: ุชุญุฐูุฑุงุช (warning)
- **ุฃุญูุฑ**: ุฃุฎุทุงุก (error)

## API Endpoints ๐

### 1. GET `/status`
**ุงููุตู**: ุงูุญุตูู ุนูู ุญุงูุฉ ุงูุฎุงุฏู

**ุงูุฑุฏ**:
```json
{
  "status": "ok",
  "message": "Render V2 server is running.",
  "queueLength": 2,
  "isProcessing": true,
  "watching": "C:\\Orca-Render-Pr\\Server\\render_jobs_temp"
}
```

### 2. POST `/render`
**ุงููุตู**: ุฅุถุงูุฉ ูุธููุฉ ุนุฑุถ ุฌุฏูุฏุฉ

**ุงูุจูุงูุงุช ุงููุทููุจุฉ**:
```json
{
  "episodeId": "ep123",
  "episodeCode": "EP01",
  "podcastCode": "BH",
  "reels": [
    {
      "id": "reel1",
      "reelName": "BH-EP01-Reel1.mp4"
    },
    {
      "id": "reel2",
      "reelName": "BH-EP01-Reel2.mp4"
    }
  ]
}
```

**ุงูุฑุฏ**:
```json
{
  "message": "Render job accepted and queued for processing."
}
```

## WebSocket Events ๐ก

### Events ุงููุฑุณูุฉ ูู ุงูุฎุงุฏู:

| Event | ุงูุจูุงูุงุช | ุงููุตู |
|-------|----------|--------|
| `status-update` | `{ queueLength, isProcessing }` | ุชุญุฏูุซ ุญุงูุฉ ุงูุฎุงุฏู |
| `queue-update` | `[jobs...]` | ุชุญุฏูุซ ูุงุฆูุฉ ุงููุธุงุฆู |
| `log` | `{ message, type, details }` | ุฑุณุงูุฉ ุณุฌู ุฌุฏูุฏุฉ |
| `job-started` | `{ job }` | ุจุฏุก ูุนุงูุฌุฉ ูุธููุฉ |
| `job-completed` | `{ job }` | ุงูุชูุงู ูุธููุฉ |
| `reel-completed` | `{ fileName, url, episodeCode }` | ุงูุชูุงู ุฑูุน ุฑูู |
| `reel-failed` | `{ fileName, error, episodeCode }` | ูุดู ุฑูุน ุฑูู |

### Events ุงููุฑุณูุฉ ูู ุงูุนููู:

| Event | ุงููุตู |
|-------|--------|
| `request-status` | ุทูุจ ุชุญุฏูุซ ุงูุญุงูุฉ ุงูุญุงููุฉ |

## ูููู ุงููุฌูุฏุงุช ๐

```
Server/
โโโ server.js                    # ููู ุงูุฎุงุฏู ุงูุฑุฆูุณู
โโโ public/                      # ุงููููุงุช ุงูุซุงุจุชุฉ
โ   โโโ index.html              # ูุงุฌูุฉ GUI
โโโ config/                      # ูููุงุช ุงูุฅุนุฏุงุฏุงุช
โ   โโโ valiant-monitor-*.json  # ุจูุงูุงุช ุงุนุชูุงุฏ GCS
โโโ render_jobs_temp/            # ูุฌูุฏ ุงููุธุงุฆู ุงููุคูุช
โ   โโโ job-*.json              # ูููุงุช ูุธุงุฆู JSON
โ   โโโ *.mp4                   # ูููุงุช MP4 ุงููุงุชุฌุฉ (ูุคูุชุฉ)
โโโ README.md                    # ูุฐุง ุงูููู
```

## ุณูุฑ ุงูุนูู (Workflow) ๐

```
1. ุงุณุชูุจุงู ุทูุจ POST /render
   โโ ุญูุธ JSON ูู render_jobs_temp/
   โโ ุฅุถุงูุฉ ูููุงุฆูุฉ jobQueue
   โโ ุฅุฑุณุงู ุฅุดุนุงุฑ WebSocket ููุนููุงุก

2. ูุนุงูุฌุฉ ุงููุธููุฉ processQueue()
   โโ ุฅูุดุงุก ุฎุฑูุทุฉ ููุฑููุงุช
   โโ ุชูุนูู ูุฑุงูุจ ุงููููุงุช
   โโ ุฅุฑุณุงู ุญุฏุซ job-started
   โโ ุงูุชุธุงุฑ ุธููุฑ ูููุงุช MP4

3. ุงูุชุดุงู ููู MP4
   โโ ุชุญุฏูุซ ุญุงูุฉ ุงูุฑูู: uploading
   โโ ุฑูุน ููู GCS
   โโ ุชุญุฏูุซ ุญุงูุฉ ุงูุฑูู: completed
   โโ ุฅุฑุณุงู ุญุฏุซ reel-completed
   โโ ุญุฐู ุงูููู ุงููุญูู
   โโ ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู

4. ุฅููุงุก ุงููุธููุฉ
   โโ ุฅุฑุณุงู ุญุฏุซ job-completed
   โโ ุญุฐู ููู JSON
   โโ ุชูุธูู ุงููุชุบูุฑุงุช
   โโ ุงูุงูุชูุงู ูููุธููุฉ ุงูุชุงููุฉ
```

## ุงูุฅุนุฏุงุฏุงุช โ๏ธ

ููููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ูู ุจุฏุงูุฉ ููู `server.js`:

```javascript
const PORT = 6068;                           // ูููุฐ ุงูุฎุงุฏู
const BUCKET_NAME = "bathhadeethreels";      // ุงุณู GCS bucket
const APP_HOSTING_URL = "https://...";       // ุฑุงุจุท ุงูุชุทุจูู ููุฅุดุนุงุฑุงุช
const RENDER_JOBS_DIR = './render_jobs_temp'; // ูุฌูุฏ ุงููุธุงุฆู
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ๐ง

### ุงูุฎุงุฏู ูุง ูุจุฏุฃ
- ุชุฃูุฏ ูู ุฃู ุงููููุฐ 6068 ุบูุฑ ูุณุชุฎุฏู
- ุชุญูู ูู ุชุซุจูุช ุฌููุน ุงูุญุฒู: `npm install`

### ุงููุงุฌูุฉ ูุง ุชุชุตู
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุฎุงุฏู
- ุชุญูู ูู console ุงููุชุตูุญ ููุฃุฎุทุงุก (F12)
- ุชุฃูุฏ ูู ูุตููู ูู `http://localhost:6068` ูููุณ IP ุขุฎุฑ

### ุงูุฑููุงุช ูุง ุชูุฑูุน
- ุชุญูู ูู ููู ุจูุงูุงุช ุงุนุชูุงุฏ GCS
- ุชุฃูุฏ ูู ุฃู ุงุณู bucket ุตุญูุญ
- ุฑุงุฌุน ุณุฌู ุงูุฃุญุฏุงุซ ูู ุงููุงุฌูุฉ

### ูููุงุช MP4 ูุง ุชููุชุดู
- ุชุฃูุฏ ูู ุฃู ุฃุณูุงุก ุงููููุงุช ุชุทุงุจู `reelName` ูู JSON
- ุชุญูู ูู ุฃู ุงููุฌูุฏ `render_jobs_temp` ููุฌูุฏ
- ุฑุงุฌุน console ุงูุฎุงุฏู ููุฃุฎุทุงุก

## ุงูุชุทููุฑ ุงููุณุชูุจูู ๐

- [ ] ุฅุถุงูุฉ ูุตุงุฏูุฉ (Authentication)
- [ ] ูุงุนุฏุฉ ุจูุงูุงุช ูุชุชุจุน ุงููุธุงุฆู ุงูุชุงุฑูุฎูุฉ
- [ ] ุฅุนุงุฏุฉ ูุญุงููุฉ (Retry) ุนูุฏ ูุดู ุงูุฑูุน
- [ ] ุชุญููู ูููุงุช ูุจุงุดุฑุฉ ูู ุงููุงุฌูุฉ
- [ ] ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ (charts)
- [ ] ุฅุดุนุงุฑุงุช ุจุฑูุฏ ุฅููุชุฑููู ุนูุฏ ุงูุงูุชูุงู

## ุงูุชุฑุฎูุต ๐

ูุฐุง ุงููุดุฑูุน ุฌุฒุก ูู ูุธุงู Orca Render.

---

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ Claude Code ๐ค
